server:
  port: 9000

spring:
  web:
    resources:
      add-mappings: true
  threads:
    virtual:
      enabled: true

  mvc:
    static-path-pattern: /templates/**
  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 100MB
  thymeleaf:
    cache: false

  ai:
    ollama:
      chat:
        options:
          model: qwen3:latest
      embedding:
        options:
          model: qwen3-embedding:latest
      base-url: http://172.16.63.81:11434
    dashscope:
      chat:
        enabled: false
      embedding:
        enabled: false
    openai:
      api-key: EMPTY
      base-url: http://172.16.63.81:8000
      chat:
        options:
          model: Qwen3-VL-30B-A3B-Instruct-FP8
          tool-choice: auto
          temperature: 0.7

  datasource:
    url: jdbc:mysql://172.30.0.10:30200/zeus-ops-ai-test?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver

  # JPA
  jpa:
    hibernate:
      ddl-auto: update
    database-platform: org.hibernate.dialect.MySQL8Dialect
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        use_sql_comments: true

# 系统提示词外部文件路径配置（K8S环境使用）
system-prompt:
  file-path: ${SYSTEM_PROMPT_FILE_PATH:}

# 工单系统API配置示例
workorder:
  mock-mode: false
  api:
    # 基础URL - 实际环境中需要替换为真实地址
    base-url: http://172.16.64.112:31117/gdu-domp-api

    # 超时配置(毫秒)
    connect-timeout: 5000
    read-timeout: 10000

    # 重试配置
    retry-enabled: true
    max-retries: 3

    # 认证配置
    auth:
      type: BEARER  # 认证类型: NONE, BASIC, BEARER, API_KEY
      bearer-token: a5b09181-3940-464f-bff9-f480b1bfeb75  # Bearer Token
      # api-key: your-api-key  # API Key认证时使用
      # api-key-header: X-API-Key  # API Key Header名称
      # username: your-username  # Basic认证时使用
      # password: your-password  # Basic认证时使用

    # API端点配置(可选，使用默认值)
    endpoints:
      nature-list: /business/workOrder/natureList
      get-poi-name: /business/overview-mode/search/getPoiName
      get-routes: /routes/route/getRouteByRadius
      get-route-info: /routes/route/getByRouteId
      create-work-order: /business/workOrder/create

# Dify配置
dify:
  base-url: http://172.30.0.10:30000
  api-key: ${DIFY_API_KEY:app-Ogg3aPNeJGDDgBuD4AvBLfip}
  timeout:
    connect: 30s
    read: 120s # 流式响应需要更长的超时时间
    write: 30s
  max-connections: 500
  max-connections-per-route: 100
  alarmTypes:
    ai_algorithm_1013: 烟雾/火点
    ai_algorithm_1014: 烟雾/火点
    ai_algorithm_1001: 人员（地面）
    ai_algorithm_1031: 人员（地面）
    ai_algorithm_1010: 人员（水域）
    ai_algorithm_1008: 生活垃圾
    ai_algorithm_1017: 泥土渣土堆积
    ai_algorithm_1018: 泥土渣土堆积
    ai_algorithm_1045: 路面积水
    ai_algorithm_1047: 特点地点拉横幅
    ai_algorithm_1056: 非法垂钓
    ai_algorithm_1058: 渣土车挖掘机推土机非法作业识别
    ai_algorithm_1033: 非法售卖危化品
    ai_algorithm_1027: 建筑垃圾
    ai_algorithm_1019: 指定区域裸漏泥土渣土
    ai_algorithm_1021: 房屋违建检测

springdoc:
  version: '@springdoc.version@'
  swagger-ui:
    use-root-path: true
uap:
  auth:
    client:
      clientId: gdu-uap-upms
      cache:
        enabled: true
        type: LOCAL
        expiryTimeSeconds: 10
  server:
    name:
      auth: gdu-uap-auth-server
      upms: gdu-uap-upms-biz
      log: gdu-uap-log-server
gdu:
  sdk:
    file:
      bucketName: uap-track-binary
      oss:
        enable: true
        endpoint: http://172.16.64.112:30320
        access-key: Z1Penr7wZO4vPV3S8XwD
        secret-key: Y32qFWVrBLvHvy4ejkSsiAtxX5yyMqdWcnj4MVfL
rmi:
  uap:
    log:
      url: 172.16.64.112:31948
    upms:
      url: 172.16.64.112:31655
    auth:
      url: 172.16.64.112:31231
security:
  oauth2:
    client:
      ignoreUrls:
        - /assets/**
        - /api/assistant/**
        - /api/bookings
        - /index.html
        - /favicon.ico
        # 新增：Swagger/Knife4j文档
        - /doc.htm
        - /swagger-ui.html
        - /swagger-ui/**
        - /v3/api-docs/**
        - /webjars/**
        - /swagger-resources/**
        # 新增：Actuator监控
        - /actuator/**
        # 新增：静态资源
        - /static/**
        - /templates/**