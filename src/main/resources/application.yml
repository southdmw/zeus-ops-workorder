server:
  port: 9000

spring:
  web:
    resources:
      add-mappings: true

  threads:
    virtual:
      enabled: true

  mvc:
    static-path-pattern: /templates/**
  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 100MB
  thymeleaf:
    cache: false

  ###################
  # Anthropic Claude 3
  ###################
  # ai:
  #   anthropic:
  #     api-key: ${ANTHROPIC_API_KEY}
  #     chat:
  #       options:
  #         model: claude-3-5-sonnet-20240620

  ###################
  # Groq
  ###################
  # ai:
  #   openai:
  #     api-key: ${GROQ_API_KEY}
  #     base-url: https://api.groq.com/openai
  #     chat:
  #       options:
  #         model: llama3-70b-8192

  ai:
    ollama:
      chat:
        options:
          model: qwen3:latest
      embedding:
        options:
          model: qwen3-embedding:latest
      base-url: http://172.16.63.81:11434
    dashscope:
      chat:
        enabled: false
      embedding:
        enabled: false
#    openai:
#      chat:
#        enabled: false
#      embedding:
#        enabled: false
    openai:
      api-key: EMPTY
      base-url: http://172.16.63.81:8000
      chat:
        options:
          model: Qwen3-VL-30B-A3B-Instruct-FP8
          temperature:

  datasource:
    url: jdbc:mysql://172.30.0.10:30200/zeus-ops-ai?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver

  # JPA
  jpa:
    hibernate:
      ddl-auto: update
    database-platform: org.hibernate.dialect.MySQL8Dialect
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        use_sql_comments: true

###################
# OpenAI
###################
# spring:
#   ai:
#     openai:
#       chat:
#         options:
#           functions: getBookingDetails,changeBooking,cancelBooking
#         enabled: false
#       # Disable the OpenAI embedding when the local huggingface embedding is used
#       embedding:
#         enabled: false

###################
# Azure OpenAI
###################
# spring:
#   ai:
#     azure:
#       openai:
#         api-key: ${AZURE_OPENAI_API_KEY}
#         endpoint: ${AZURE_OPENAI_ENDPOINT}
#         chat:
#           options:
#             deployment-name: gpt-4o

###################
# Mistral AI
###################
# spring:
#   ai:
#     mistralai:
#       api-key: ${MISTRAL_AI_API_KEY}
#       chat:
#         options:
#           model: mistral-small-latest
#           functions: getBookingDetails,changeBooking,cancelBooking
#     retry:
#       on-client-errors: true
#       exclude-on-http-codes: 429

###################
# Vertex AI Gemini
###################
# spring:
#   ai:
#     vertex:
#       ai:
#         gemini:
#           project-id: ${VERTEX_AI_GEMINI_PROJECT_ID}
#           location: ${VERTEX_AI_GEMINI_LOCATION}
#           chat:
#             options:
#               model: gemini-1.5-pro-001
#               # model: gemini-1.5-flash-001
#               transport-type: REST
#               functions: getBookingDetails,changeBooking,cancelBooking

###################
# Milvus Vector Store
###################
# Change the dimensions to 384 if the local huggingface embedding is used
# spring:
#   ai:
#     vectorstore:
#       milvus:
#         embedding-dimension: 384

###################
# PGVector
###################
# spring:
#   datasource:
#     url: jdbc:postgresql://localhost:5432/postgres
#     username: postgres
#     password: postgres

###################
# QDrant
###################
# spring:
#   ai:
#     vectorstore:
#       qdrant:
#         host: localhost
#         port: 6334

###################
# Chroma
###################
# spring:
#   ai:
#     vectorstore:
#       chroma:
#         client:
#           host: http://localhost
#           port: 8000

# 系统提示词外部文件路径配置（K8S环境使用）
system-prompt:
  file-path: ${SYSTEM_PROMPT_FILE_PATH:}
# 工单系统API配置示例
workorder:
  # Mock模式开关
  # true: 使用Mock数据，不调用真实API
  # false: 调用真实API，失败时降级到Mock数据
  mock-mode: false
  api:
    # 基础URL - 实际环境中需要替换为真实地址
    base-url: http://172.16.64.112:30755/gdu-domp-api

    # 超时配置(毫秒)
    connect-timeout: 5000
    read-timeout: 10000

    # 重试配置
    retry-enabled: true
    max-retries: 3

    # 认证配置
    auth:
      type: BEARER  # 认证类型: NONE, BASIC, BEARER, API_KEY
      bearer-token: c2950e3d-557e-4a99-a154-d649f4569b55  # Bearer Token
      # api-key: your-api-key  # API Key认证时使用
      # api-key-header: X-API-Key  # API Key Header名称
      # username: your-username  # Basic认证时使用
      # password: your-password  # Basic认证时使用

    # API端点配置(可选，使用默认值)
    endpoints:
      nature-list: /business/workOrder/natureList
      get-poi-name: /business/overview-mode/search/getPoiName
      get-routes: /routes/route/getRouteByRadius
      get-route-info: /routes/route/getByRouteId
      create-work-order: /business/workOrder/create

# Dify配置
dify:
  base-url: http://172.30.0.10:30000
  api-key: ${DIFY_API_KEY:app-Ogg3aPNeJGDDgBuD4AvBLfip}
  timeout:
    connect: 30s
    read: 120s # 流式响应需要更长的超时时间
    write: 30s
  max-connections: 500
  max-connections-per-route: 100
  alarmTypes:
    ai_algorithm_1013: 烟雾/火点
    ai_algorithm_1014: 烟雾/火点

springdoc:
  version: '@springdoc.version@'
  swagger-ui:
    use-root-path: true
uap:
  auth:
    client:
      clientId: gdu-uap-upms
      cache:
        enabled: true
        type: LOCAL
        expiryTimeSeconds: 10
  server:
    name:
      auth: gdu-uap-auth-server
      upms: gdu-uap-upms-biz
      log: gdu-uap-log-server
gdu:
  sdk:
    file:
      bucketName: uap-track-binary
      oss:
        enable: true
        endpoint: http://172.16.64.112:30320
        access-key: Z1Penr7wZO4vPV3S8XwD
        secret-key: Y32qFWVrBLvHvy4ejkSsiAtxX5yyMqdWcnj4MVfL
rmi:
  uap:
    log:
      url: 172.16.64.112:30024
    upms:
      url: 172.16.64.112:31765
    auth:
      url: 172.16.64.112:30973
security:
  oauth2:
    client:
      ignoreUrls:
        - /mobile/**
        - /inner/**
        - /assets/**
        - /api/assistant/**
        - /index.html
        - /favicon.ico
        # 新增：Swagger/Knife4j文档
        - /doc.html
        - /swagger-ui.html
        - /swagger-ui/**
        - /v3/api-docs/**
        - /webjars/**
        - /swagger-resources/**
        # 新增：Actuator监控
        - /actuator/**
        # 新增：静态资源
        - /static/**
        - /templates/**
